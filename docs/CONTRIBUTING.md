# 文档编写指南

本指南说明如何为 EsportManager 2 项目编写和维护文档。请在贡献文档时遵循以下规范。

## 目录结构

```
docs/
├── README.md                    # 文档索引（必须更新）
├── CONTRIBUTING.md              # 本文件 - 文档编写指南
├── 01-overview/                 # 项目概览
├── 02-game-design/              # 游戏设计/策划
├── 03-core-systems/             # 核心系统文档
├── 04-technical/                # 技术开发文档
├── 05-ai/                       # AI 系统文档
└── archive/                     # 归档（已废弃的旧文档）
```

### 目录用途

| 目录 | 用途 | 适合放置的内容 |
|------|------|--------------|
| `01-overview` | 项目总览 | 架构图、技术栈、目录结构 |
| `02-game-design` | 游戏策划 | 游戏规则、赛事设计、数值设计 |
| `03-core-systems` | 核心系统 | 各业务系统的设计与实现文档 |
| `04-technical` | 技术开发 | API、数据库、前后端开发指南 |
| `05-ai` | AI 系统 | AI 决策、算法说明 |
| `archive` | 归档 | 已废弃但保留参考的旧文档 |

## 命名规范

### 文件命名

- **使用英文 + 短横线**：`player-system.md`
- **全部小写**：`transfer-system.md`
- **简洁明确**：`api-reference.md`

```
✅ 正确示例：
player-system.md
match-simulation.md
database-schema.md

❌ 错误示例：
选手系统.md          # 不要用中文
PlayerSystem.md      # 不要用驼峰
player_system.md     # 不要用下划线
player system.md     # 不要用空格
```

### 目录命名

- 使用数字前缀保证顺序：`01-overview`、`02-game-design`
- 小写英文 + 短横线

## 文档模板

### 系统文档模板

```markdown
# 系统名称

## 概述

一句话描述系统的核心功能和目的。

## 核心概念

解释关键术语和概念。

## 数据结构

\```rust
pub struct ExampleModel {
    pub id: u64,
    pub name: String,
    // ... 字段说明
}
\```

## 核心流程

\```
步骤1 → 步骤2 → 步骤3
           ↓
        步骤4
\```

## 规则说明

| 规则 | 说明 |
|------|------|
| 规则1 | 详细说明 |
| 规则2 | 详细说明 |

## API 接口

| 接口 | 描述 |
|------|------|
| `api_name(params)` | 功能描述 |

## 文件位置

| 文件 | 说明 |
|-----|------|
| `src-tauri/src/xxx.rs` | 核心实现 |
```

### 技术文档模板

```markdown
# 技术主题

## 概述

技术背景和用途说明。

## 技术栈

| 技术 | 版本 | 用途 |
|------|------|------|
| xxx | x.x | 用途说明 |

## 使用方法

### 基本用法

\```typescript
// 代码示例
\```

### 进阶用法

\```typescript
// 更复杂的示例
\```

## 最佳实践

1. **实践1**：说明
2. **实践2**：说明

## 常见问题

### Q: 问题1？
A: 解答

## 文件位置

| 文件 | 说明 |
|-----|------|
| `path/to/file` | 说明 |
```

## 编写风格

### 语言

- **主体使用中文**
- 专业术语可保留英文：API、SDK、BO3
- 代码、文件名、命令使用英文

### 格式规范

1. **标题层级**
   - `#` 文档标题（每个文档只有一个）
   - `##` 主要章节
   - `###` 子章节
   - `####` 细分内容（尽量避免超过4级）

2. **代码块**
   - 必须标注语言类型：\```rust、\```typescript
   - 关键代码添加注释说明

3. **表格**
   - 用于对比、配置、参数说明
   - 保持列对齐

4. **列表**
   - 有序列表用于步骤流程
   - 无序列表用于并列项目

### 内容规范

1. **开头有概述**：每个文档开头用 1-2 句话说明主题
2. **结尾有文件位置**：列出相关源码文件路径
3. **图表优先**：能用图表说明的不用大段文字
4. **代码示例**：关键功能必须有代码示例
5. **保持更新**：代码变更后同步更新文档

## 添加新文档流程

### 1. 确定目录

根据文档类型选择合适的目录：

```
游戏规则/数值设计 → 02-game-design/
业务系统实现     → 03-core-systems/
开发技术指南     → 04-technical/
AI/算法相关      → 05-ai/
```

### 2. 创建文件

```bash
# 在对应目录创建文件
touch docs/03-core-systems/new-system.md
```

### 3. 使用模板

复制上面的模板，填充内容。

### 4. 更新索引

在 `docs/README.md` 中添加新文档链接：

```markdown
### 03-core-systems 核心系统
- [新系统](03-core-systems/new-system.md) - 新系统描述
```

### 5. 提交说明

```bash
git add docs/
git commit -m "docs: 添加新系统文档"
```

## 维护旧文档

### 更新文档

当代码发生变更时：

1. 找到对应的文档
2. 更新相关内容
3. 检查代码示例是否仍然有效
4. 更新文件位置（如有变动）

### 废弃文档

当文档不再需要时：

1. **不要直接删除**
2. 移动到 `archive/` 目录
3. 从 `README.md` 索引中移除链接

```bash
mv docs/03-core-systems/old-system.md docs/archive/
```

## 文档审查清单

提交文档前，请检查：

- [ ] 文件名符合命名规范（英文、小写、短横线）
- [ ] 放置在正确的目录下
- [ ] 包含概述部分
- [ ] 包含文件位置部分
- [ ] 代码块标注了语言类型
- [ ] 已更新 README.md 索引
- [ ] 无明显的拼写错误

## 示例参考

优秀文档示例：

- [比赛模拟系统](03-core-systems/match-simulation.md) - 系统文档典范
- [API 接口参考](04-technical/api-reference.md) - 技术文档典范
- [赛事规则](02-game-design/tournaments.md) - 策划文档典范

---

**有问题？** 参考现有文档或联系项目维护者。
