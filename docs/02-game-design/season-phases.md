# 赛季阶段设计

## 赛季时间体系

游戏时间不按照真实年份，统一按照 S1、S2、S3... 来推进。每年的赛季从春季赛开始，到赛季结束为止。

## 15个游戏阶段

| 序号 | 阶段代码 | 阶段名称 | 说明 |
|------|----------|----------|------|
| 1 | `SpringRegular` | 春季赛常规赛 | 赛区内 BO3 双循环 |
| 2 | `SpringPlayoffs` | 春季赛季后赛 | 前8名双败淘汰赛 |
| 3 | `Msi` | MSI 季中邀请赛 | 4赛区冠亚季军参赛 |
| 4 | `MadridMasters` | 马德里大师赛 | 4赛区前8名参赛 |
| 5 | `SummerRegular` | 夏季赛常规赛 | 赛区内 BO3 双循环 |
| 6 | `SummerPlayoffs` | 夏季赛季后赛 | 前8名双败淘汰赛 |
| 7 | `ClaudeIntercontinental` | Claude 洲际赛 | 4赛区前8名参赛 |
| 8 | `WorldChampionship` | S 世界赛 | 4赛区冠亚季军参赛 |
| 9 | `ShanghaiMasters` | 上海大师赛 | 4赛区冠亚季军参赛 |
| 10 | `IcpIntercontinental` | ICP 洲际对抗赛 | 赛区对抗赛 |
| 11 | `SuperIntercontinental` | Super 洲际邀请赛 | 年度积分Top16参赛 |
| 12 | `AnnualAwards` | 年度颁奖典礼 | 年度MVP等评选 |
| 13 | `TransferWindow` | 转会期 | 8轮转会系统 |
| 14 | `Draft` | 选秀 | 每4年一次(S2,S6,S10...) |
| 15 | `SeasonEnd` | 赛季结束 | 进入下一赛季 |

## 阶段流程图

```
┌─────────────────────────────────────────────────────────────────────┐
│                           赛季开始 (S1)                              │
└─────────────────────────────────────────────────────────────────────┘
                                   │
                                   ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ 春季赛常规赛 │ →  │ 春季赛季后赛 │ →  │    MSI     │ →  │ 马德里大师赛 │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
                                                                │
                                                                ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ 夏季赛常规赛 │ ←  │ 夏季赛季后赛 │ ←  │Claude洲际赛 │ ←  │    世界赛   │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
       │
       ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ 上海大师赛   │ →  │ ICP洲际对抗赛│ →  │Super洲际赛 │ →  │  年度颁奖   │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
                                                                │
                                                                ▼
                   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
                   │   转会期    │ →  │    选秀     │ →  │  赛季结束   │
                   └─────────────┘    └─────────────┘    └─────────────┘
                                                                │
                                                                ▼
                                                         进入下一赛季 (S2)
```

## 阶段状态机

每个阶段都有三种状态：

```
NOT_INITIALIZED ──(初始化阶段)──→ IN_PROGRESS ──(完成比赛)──→ COMPLETED
                                      ↑                           │
                                      └────(推进到下一阶段)────────┘
```

| 状态 | 说明 |
|------|------|
| `NotInitialized` | 阶段未初始化，需要先创建赛事 |
| `InProgress` | 阶段进行中，可以模拟比赛 |
| `Completed` | 阶段已完成，可以推进到下一阶段 |

## 时间推进规则

1. **顺序推进**: 只能按顺序推进，不能跳过阶段
2. **初始化检查**: 进入新阶段前需要先初始化（创建赛事）
3. **完成检查**: 当前阶段所有比赛完成后才能推进
4. **防误操作**: 非当前阶段的操作按钮会被禁用

## 选秀年判定

选秀每4个赛季进行一次：

```
选秀年公式: (season - 2) % 4 == 0

选秀年: S2, S6, S10, S14, S18...
非选秀年: S1, S3, S4, S5, S7, S8, S9...
```

## 赛季选择与历史数据

### 两个核心概念

- **当前活跃赛季**: 游戏正在进行的赛季，决定游戏进度
- **查看赛季**: 用户当前正在浏览的赛季数据，可以是历史赛季

### 数据分类规则

| 页面类型 | 数据显示方式 | 说明 |
|---------|-------------|------|
| 赛事管理 | 按赛季显示 | 每个赛季的赛事独立 |
| 战队管理 | 累计显示 | 战队数据随赛季累积 |
| 选手中心 | 累计显示 | 选手数据随赛季累积 |
| 荣誉殿堂 | 可筛选 | 支持"全部赛季"和单独赛季筛选 |
| 积分排名 | 按赛季显示 | 显示当前查看赛季的积分排名 |

### UI 提示

当用户查看历史赛季时：
- 显示黄色警告提示："您正在查看 S1 赛季的历史数据"
- 提供"返回当前赛季"按钮
